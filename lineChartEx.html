<html>
  <head>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
    
       let jsonData;
       const url = 'http://localhost:3000/getDataBase';

       function sendRequest(methode, url, body = null){
        const proxyurl = "https://cors-anywhere.herokuapp.com/"; 
        const reqURL=proxyurl+url;
        return fetch(url).then(response => {
          return response.json();
        });
       }

       sendRequest('GET', url)
        .then(data => {
          let idDataPassed;
          let resTimeP=0;
          let resTimeF=0;
          let id=0;
          console.log("QQQQQQQQQQQQQQQQQQQQQQQQ");
         
          jsonData=data;
          
           let arJson=[ 
             [0,0,0]
           ];
          jsonData.forEach( (jsonData) => {
          
            idDataPassed=`${jsonData.statusCode}`;
            //добавить другие status code
            if(idDataPassed==200){ 
              resTimeP=parseInt(`${jsonData.responseTime}`);              
            }else{
              resTimeF=parseInt(`${jsonData.responseTime}`);
            }
            id=parseInt(`${jsonData.id}`);
            arJson.push([id,resTimeP,resTimeF]);

          });
         console.log(arJson);
      //line chart Start
      google.charts.load('current', {'packages':['line']});
      google.charts.setOnLoadCallback(drawChart);

    function drawChart() {

      var data = new google.visualization.DataTable();
      data.addColumn('number', 'Time');
      data.addColumn('number', 'Passed');
      data.addColumn('number', 'Failed');
      
      data.addRows(arJson);

      var options = {
        chart: {
          title: 'Box Office Earnings in First Two Weeks of Opening',
          subtitle: 'in millions of dollars (USD)'
        },
        width: 900,
        height: 500
      };

      var chart = new google.charts.Line(document.getElementById('linechart_material'));

      chart.draw(data, google.charts.Line.convertOptions(options));
    }
    //line chart End
  } )
        .catch(err => console.log(err))

    </script>
  </head>
  <body>
    <div id="linechart_material" style="width: 900px; height: 500px"></div>
  </body>
</html>